<!DOCTYPE html>
<html lang="en">
<head>

	<link rel="prerender" href="app/html/photo-album.html">
	
	<!-- START Google Tag Manager -->
	<script>
		(function(w,d,s,l,i){
			w[l]=w[l]||[];
			w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});
			var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';
			j.async=true;
			j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;
			f.parentNode.insertBefore(j,f);
		})(window,document,'script','dataLayer','GTM-N29JBVF');
	</script>
	<!-- END Google Tag Manager -->

	<!-- START Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-FH4B53T4V4"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());
	
	  gtag('config', 'G-FH4B53T4V4');
	</script>
	<!-- END Global site tag (gtag.js) -->

	<!-- START Server-side GTM container -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=GTM-NCJFP6N"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'GTM-NCJFP6N', {
	    transport_url: 'https://gtm-ncjpf6n-njayn.uc.r.appspot.com',
	  });
		
	  function sendEvent() {
    	    console.log("sendGAevent fn executed");
	    gtag('event', 'click');
  	  }
	</script>
	<!-- END Server-side GTM container -->
	
	<!-- START LaunchDarkly -->
	<script src="https://unpkg.com/launchdarkly-js-client-sdk@2.22.1/dist/ldclient.min.js">// Loads LD SDK</script>
	<script>
		const user = {
			key: 'defaultWebUser',
			name: 'Boris',
			custom: {
				experiment: true
			}
		};

		const initOptions = {
			evaluationReasons: true,
			logger: LDClient.createConsoleLogger("debug")
		};

		const LDInstance = LDClient.initialize('62e152c30e7117115603feae', user);
		LDInstance.on('ready', () => {
			const flagKey = "multivariate-flag"

			const flagValues = LDInstance.allFlags();
			console.log(flagValues);

			let detail = LDInstance.variationDetail(flagKey, false);
			let { value, variationIndex, reason } = detail;
			detail.flagKey = flagKey;
			console.log(detail);

			// window.dataLayer.push({
			// 	'event':'LDvariationDetail',
			// 	'experimentName': flagKey,
			// 	'action': 'content loaded',
			// 	'category': 'experiment',
			// 	'label': `${flagKey}-evaluatted`,
			// 	value,
			// 	variationIndex
			// });
		});

	</script>


	<!-- START Optimizely Full Stack -->
	<!-- <script src="https://unpkg.com/@optimizely/optimizely-sdk/dist/optimizely.browser.umd.min.js">// loads Optimizely Full Stack SDK as 'optimizelySdk'</script>  -->
	<script>
		// optimizelySdk.setLogger(optimizelySdk.logging.createLogger());
		// optimizelySdk.setLogLevel('debug'); // set log level
		// var optimizelyClient = optimizelySdk.createInstance({ 
		// 	sdkKey: 'HvJfjTT5d73b4zZkfyKqEp',
		// 	// datafileOptions: {
		// 	// 	autoUpdate: true,
		// 	// 	updateInterval: 2000,
		// 	// 	urlTemplate: 'https://cdn.optimizely.com/datafiles/%s.json'
		// 	// }
		// 	eventBatchSize: 100,
  		// 	eventFlushInterval: 5000
		// });
		// optimizelyClient.onReady({ timeout: 2500 }).then(result => {
		// 	if (result.success === false) {
		// 		console.log(`couldn't fetch datafile because: ${result.reason}`);
		// 		return;
		// 	} else {
		// 		console.log(`Full Stack datafile ready: ${result.success}`);
		// 	}
		// 	var userId = 'defaultWebUser';
		// 	var snippetEnabled = optimizelyClient.isFeatureEnabled('web_snippet', userId);
		// 	var snippetUrl = optimizelyClient.getFeatureVariableString('web_snippet', 'url', userId);
		// 	if (!!snippetEnabled) {
		// 		var webSnippet = document.createElement('script');
		// 		webSnippet.src = snippetUrl;
		// 		document.head.appendChild(webSnippet);
		// 	}
			
		// 	optimizelyClient.activate('everyone_test', userId);
		// });
	</script>
	<!-- END Optimizely Full Stack -->
	
	<!-- START Segment snippet -->
	<script>
		!function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics._writeKey="XIOqdp2UQ7NDMZOPcos6IL2GeLwPEJdP";;analytics.SNIPPET_VERSION="4.15.3";
		analytics.load("XIOqdp2UQ7NDMZOPcos6IL2GeLwPEJdP");
		analytics.page();
		}}();
	</script>
	<!-- END Segment snippet -->
  
	<title>Flexbox Gridzz</title>
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700,900" rel="stylesheet">
  	<link rel="stylesheet" href="app/fonts/font-awesome/css/font-awesome.min.css">

	<link rel='stylesheet'
				media='screen and (max-width: 900px)' href='app/css/style-mobile.css'/>
	<link rel='stylesheet'
				media='screen and (min-width: 901px)' href='app/css/style-desktop.css'/>

  	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta charset="UTF-8">
	<link rel="icon" type="img/ico" href="favicon.ico" />
</head>

<body>
	<!-- Google Tag Manager (noscript) -->
	<noscript>
		<iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N29JBVF" height="0" width="0" style="display:none;visibility:hidden"></iframe>
	</noscript>
	<!-- End Google Tag Manager (noscript) -->
  <main class="container homepage">
    <h1 class="page-title">Flexbox Playground</h1>
		<section class="button-wrapper">
      <div class="button style-index" id="custom-event-trigger">
        <a href="#" class="button">Custom event button</a>
      </div>
			
      <button onclick="javascript:sendEvent()">Send GA event</button>

	  </section>
    <div class="intro">
			<p>Hey! This site consists of several almost childishly simple views that use exlusively flexbox for arranging elements on the page. It doesn't burst with useful functionality (yet?) but: <br>a) It's responsive <br>b) The code is (in my eyes) reasonably structured and clean.</p>
      <p>To make things as smooth as possible I have used the automated help of my new best friend Gulp, while exploring the powers of Sass. For mobile view I put media query in use.</p>
    </div>
    <section class="button-wrapper">
      <div class="button style-index">
        <a href="app/html/grid.html" class="button">Twelve column grid</a>
      </div>

      <div class="button style-index">
        <a href="app/html/calendar.html" class="button">Calendar</a>
      </div>

      <div class="button style-index">
        <a href="app/html/header-footer.html" class="button">Fix header & footer</a>
      </div>

      <div class="button style-index">
        <a href="app/html/photo-album.html" class="button">Photo album</a>
      </div>
    </section>
  </main>

</body>
</html>
